{"version":3,"sources":["webpack:///./src/app/Recipe.ts","webpack:///./src/app/auth/auth.service.ts"],"names":[],"mappings":"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","file":"default~account-account-module~foodlist-foodlist-module~login-login-module~recipedetails-recipedetai~2e537e95.js","sourcesContent":["export enum Macro { Carbohydrates, Protein, Fat}\n\nconst CARBS_STR = 'C';\nconst PROTEIN_STR = 'P';\nconst FAT_STR = 'F';\n\nexport class Recipe {\n\n  constructor(private title: string, private numServings: string, private macros: Macro[],\n              private prepTime: string, private ingredients: string[], private steps: string[]) { }\n\n  get getRecipeTitle() {\n    return this.title;\n  }\n\n  get getNumServings() {\n    return this.numServings;\n  }\n\n  get getMacros() {\n    return this.macros;\n  }\n\n  get getPrepTime() {\n    return this.prepTime;\n  }\n\n  get getIngredients() {\n    return this.ingredients;\n  }\n\n  get getSteps() {\n    return this.steps;\n  }\n\n  static parseNumServings(servings: string): string {\n    return servings;\n  }\n\n  // parse out the 3 basic nutrition macros from\n  // the firebase data store.\n  static parseMacros(macros: string): Macro[] {\n    const returnArray: Macro[] = [];\n    if (macros.indexOf('C') !== -1 ) {\n      returnArray.push(Macro.Carbohydrates);\n    }\n\n    if (macros.indexOf('P') !== -1) {\n      returnArray.push(Macro.Protein);\n    }\n\n    if (macros.indexOf('F') !== -1) {\n      returnArray.push(Macro.Fat);\n    }\n\n    return returnArray;\n  }\n\n  static parseSteps(stepsStr: string): string[] {\n     let steps = stepsStr.split(\"\\n\");\n     let regex = /\\d. /;\n\n     for(let i = 0; i < steps.length; i++) {\n       steps[i] = steps[i].replace(regex, \"\");\n     }\n\n     return steps;\n  }\n\n  static parseIngredients(ingredientsStr: string): string[] {\n    return ingredientsStr.split(\"\\n\");\n  }\n}","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { NavController } from '@ionic/angular';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { User } from 'firebase';\nimport * as firebase from 'firebase';\nimport { Recipe } from '../Recipe';\n\nconst RECIPE_NAME_INDEX = 0;\nconst NUM_SERVINGS_INDEX = 1;\nconst MACROS_INDEX = 2;\nconst PREP_TIME_INDEX = 3;\nconst INGREDIENTS_INDEX = 4;\nconst STEPS_INDEX = 5;\n\nexport const snapshotToRecipeArray = snapshot => {\n  const returnArr = [];\n  snapshot.forEach(childSnapshot => {\n      const item = childSnapshot.val();\n      // package everything up into an easily usable Recipe object.\n      const title = item[RECIPE_NAME_INDEX];\n      const numServings = Recipe.parseNumServings(item[NUM_SERVINGS_INDEX]);\n      const macros = Recipe.parseMacros(item[MACROS_INDEX]);\n      const prepTime = item[PREP_TIME_INDEX];\n      const ingredients = Recipe.parseIngredients(item[INGREDIENTS_INDEX]);\n      const steps = Recipe.parseSteps(item[STEPS_INDEX]);\n\n      const newRecipe = new Recipe(title, numServings, macros,\n                                  prepTime, ingredients,\n                                  steps);\n      returnArr.push(newRecipe);\n  });\n\n  return returnArr;\n};\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class AuthService {\n  private user: User;\n  private recipes = [];\n    private ref = firebase.database().ref('recipeSheet/');\n    private username: string;\n\n  constructor(public afAuth: AngularFireAuth, public router: Router, public navCtrl: NavController) {\n    this.afAuth.authState.subscribe(user => {\n      if (user) {\n        this.user = user;\n          localStorage.setItem('user', JSON.stringify(this.user));\n          this.username = localStorage.getItem(this.user.email);\n        this.navCtrl.navigateRoot(['./home']);\n      } else {\n        localStorage.setItem('user', null);\n      }\n    });\n\n    // grab recipe data from Firebase, and pack it into an array.\n    this.ref.on('value', resp => {\n      this.recipes = [];\n      this.recipes = snapshotToRecipeArray(resp);\n    });\n  }\n\n  async login(email: string, password: string) {\n    try {\n      firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);\n      await firebase.auth().signInWithEmailAndPassword(email, password);\n      this.navCtrl.navigateRoot(['./home']);\n    } catch (error) {\n      const errorMsg = error.message;\n      alert('Error signing in: ' + errorMsg);\n    }\n  }\n\n  async logout() {\n    await firebase.auth().signOut();\n    localStorage.removeItem('user');\n    this.navCtrl.navigateRoot(['./login']);\n\n  }\n\n  // ask firebase if we have a user logged in currently.\n  get isLoggedIn(): boolean {\n    if (firebase.auth().currentUser) {\n      return true;\n    } else {\n      return false;\n    }\n\t}\n\t\n\tasync signup(firstname: string,lastname:string,email: string, password: string){\n\t\ttry{\n      await this.afAuth.auth.createUserWithEmailAndPassword(email, password)\n      this.confirm_Signup(email);\n      this.accountFirstLastName(firstname, lastname);\n      \n      this.router.navigate(['./login']);\n\n\t\t}catch(e){\n      alert(\"Error!\"+e.message);\n\t\t}\n  }\n\n\n  accountEmail(): string  {\n    return  this.user.email ;\n  }\n\n  accountUserName(): string {\n    return this.username;\n  }\n\n  \n\n  resetPassword(new_password: string, conf_password: string) {\n    if (this.afAuth.auth.confirmPasswordReset(new_password, conf_password)) {\n      this.user.updatePassword(new_password);\n    } else {\n      alert('Error!: Passwords must match!');\n    }\n  }\n\n  confirm_Signup(email: string) {\n    this.user.sendEmailVerification();\n  }\n\n    accountFirstLastName(firstname: string, lastname: string): void {\n        this.username = firstname + lastname;\n    }\n\n\n  get getRecipes(): Array<Recipe> {\n    return this.recipes;\n  }\n}\n"],"sourceRoot":""}